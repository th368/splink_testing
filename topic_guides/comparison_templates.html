
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="customising_comparisons.html">
      
      
        <link rel="next" href="choosing_comparators.html">
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.15">
    
    
      
        <title>Out-of-the-box comparisons - Splink</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../css/custom.css">
    
      <link rel="stylesheet" href="../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#out-of-the-box-comparisons-for-specific-data-types" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Splink" class="md-header__button md-logo" aria-label="Splink" data-md-component="logo">
      
  <img src="../img/favicon.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Splink
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Out-of-the-box comparisons
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="purple" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/moj-analytical-services/splink" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Splink" class="md-nav__button md-logo" aria-label="Splink" data-md-component="logo">
      
  <img src="../img/favicon.ico" alt="logo">

    </a>
    Splink
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/moj-analytical-services/splink" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installations.html" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/00_Tutorial_Introduction.html" class="md-nav__link">
        0. Tutorial introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/01_Prerequisites.html" class="md-nav__link">
        1. Data prep prerequisites
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/02_Exploratory_analysis.html" class="md-nav__link">
        2. Exploratory analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/03_Blocking.html" class="md-nav__link">
        3. Blocking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/04_Estimating_model_parameters.html" class="md-nav__link">
        4. Estimating model parameters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/05_Predicting_results.html" class="md-nav__link">
        5. Predicting results
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/06_Visualising_predictions.html" class="md-nav__link">
        6. Visualising predictions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/07_Quality_assurance.html" class="md-nav__link">
        7. Quality assurance
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples_index.html" class="md-nav__link">
        Examples index
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
      
      
      
        <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
          DuckDB
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          DuckDB
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_deduplicate_50k_synthetic.html" class="md-nav__link">
        Deduplicate 50k rows historical persons
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_transactions.html" class="md-nav__link">
        Linking financial transactions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_link_only.html" class="md-nav__link">
        Linking two tables of persons
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_real_time_record_linkage.html" class="md-nav__link">
        Real time record linkage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_accuracy_analysis_from_labels_column.html" class="md-nav__link">
        QA from ground truth column
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_pairwise_labels.html" class="md-nav__link">
        Estimating m probabilities from labels
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_quick_and_dirty_persons.html" class="md-nav__link">
        Quick and dirty persons model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_febrl3.html" class="md-nav__link">
        Febrl3 Dedupe
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_febrl4.html" class="md-nav__link">
        Febrl4 link-only
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
      
      
      
        <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
          PySpark
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          PySpark
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_simple_pyspark.html" class="md-nav__link">
        Deduplication using Pyspark
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Topic Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Topic Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="backends.html" class="md-nav__link">
        Splink's SQL backends - Spark, DuckDB etc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="link_type.html" class="md-nav__link">
        Link type - linking vs deduping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="querying_splink_results.html" class="md-nav__link">
        Retrieving and querying Splink results
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="feature_engineering.html" class="md-nav__link">
        Feature Engineering
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" checked>
      
      
      
        <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
          Comparing Records
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5_5">
          <span class="md-nav__icon md-icon"></span>
          Comparing Records
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="customising_comparisons.html" class="md-nav__link">
        Defining and customising comparisons
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Out-of-the-box comparisons
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="comparison_templates.html" class="md-nav__link md-nav__link--active">
        Out-of-the-box comparisons
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#date-comparisons" class="md-nav__link">
    Date Comparisons
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#name-comparisons" class="md-nav__link">
    Name Comparisons
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#postcode-comparisons" class="md-nav__link">
    Postcode Comparisons
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forename-and-surname-comparisons" class="md-nav__link">
    Forename and Surname Comparisons
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5_3" >
      
      
      
        <label class="md-nav__link" for="__nav_5_5_3" id="__nav_5_5_3_label" tabindex="0">
          Comparing strings
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_5_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_5_3">
          <span class="md-nav__icon md-icon"></span>
          Comparing strings
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="choosing_comparators.html" class="md-nav__link">
        Choosing comparators and thresholds
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="comparators.html" class="md-nav__link">
        String comparators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="phonetic.html" class="md-nav__link">
        Phonetic transformations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="term-frequency.html" class="md-nav__link">
        Term-Frequency adjustments
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
      
      
      
        <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
          Performance
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_6">
          <span class="md-nav__icon md-icon"></span>
          Performance
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="drivers_of_performance.html" class="md-nav__link">
        Run times, performance and linking large data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="blocking_rules.html" class="md-nav__link">
        Blocking rules for prediction vs estimation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="optimising_spark.html" class="md-nav__link">
        Optimising Spark performance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="salting.html" class="md-nav__link">
        Salting blocking rules
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
      
      
      
        <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
          Linker API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          Linker API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../linker.html" class="md-nav__link">
        Full API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../linkerexp.html" class="md-nav__link">
        Exploratory analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../linkerest.html" class="md-nav__link">
        Estimating model parameters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../linkerpred.html" class="md-nav__link">
        Predicting results
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../linkerqa.html" class="md-nav__link">
        Visualisation and quality assurance
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../em_training_session.html" class="md-nav__link">
        EM Training Session API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SplinkDataFrame.html" class="md-nav__link">
        SplinkDataFrame API
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
      
      
      
        <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
          Comparisons API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_4">
          <span class="md-nav__icon md-icon"></span>
          Comparisons API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../comparison.html" class="md-nav__link">
        Comparison
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../comparison_level.html" class="md-nav__link">
        Comparison Level
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_5" >
      
      
      
        <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0">
          Comparisons Library API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_5">
          <span class="md-nav__icon md-icon"></span>
          Comparisons Library API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../comparison_library.html" class="md-nav__link">
        Comparison Library
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../comparison_template_library.html" class="md-nav__link">
        Comparison Template Library
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../comparison_level_library.html" class="md-nav__link">
        Comparison Level Library
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../comparison_level_composition.html" class="md-nav__link">
        Comparison Composition
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../settingseditor/editor.html" class="md-nav__link">
        Settings Editor
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../settings_dict_guide.html" class="md-nav__link">
        Settings dictionary reference
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
      
      
      
        <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
          Developers' guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Developers' guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1" >
      
      
      
        <label class="md-nav__link" for="__nav_9_1" id="__nav_9_1_label" tabindex="0">
          Making Changes to Splink
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_1">
          <span class="md-nav__icon md-icon"></span>
          Making Changes to Splink
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/changing_splink/building_env_locally.html" class="md-nav__link">
        Building a Virtual Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/changing_splink/lint.html" class="md-nav__link">
        Linting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/changing_splink/build_docs_locally.html" class="md-nav__link">
        Building Docs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/changing_splink/testing.html" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/changing_splink/releases.html" class="md-nav__link">
        Releasing a Package Version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/caching.html" class="md-nav__link">
        Caching and pipelining
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/debug_modes.html" class="md-nav__link">
        Understanding and debugging Splink
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/spark_pipelining_and_caching.html" class="md-nav__link">
        Spark caching
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/transpilation.html" class="md-nav__link">
        Transpilation using sqlglot
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_6" >
      
      
      
        <label class="md-nav__link" for="__nav_9_6" id="__nav_9_6_label" tabindex="0">
          Comparisons and comparison levels
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_6">
          <span class="md-nav__icon md-icon"></span>
          Comparisons and comparison levels
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/comparisons/new_library_comparisons_and_levels.html" class="md-nav__link">
        Creating new comparisons and comparison levels
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/comparisons/extending_library_comparisons_and_levels.html" class="md-nav__link">
        Extending existing comparisons and comparison levels
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/udfs.html" class="md-nav__link">
        User-Defined Functions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#date-comparisons" class="md-nav__link">
    Date Comparisons
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#name-comparisons" class="md-nav__link">
    Name Comparisons
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#postcode-comparisons" class="md-nav__link">
    Postcode Comparisons
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forename-and-surname-comparisons" class="md-nav__link">
    Forename and Surname Comparisons
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  



  
  


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script>
(function() {
  function addWidgetsRenderer() {
    var requireJsScript = document.createElement('script');
    requireJsScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js';

    var mimeElement = document.querySelector('script[type="application/vnd.jupyter.widget-view+json"]');
    var jupyterWidgetsScript = document.createElement('script');
    var widgetRendererSrc = 'https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js';
    var widgetState;

    // Fallback for older version:
    try {
      widgetState = mimeElement && JSON.parse(mimeElement.innerHTML);

      if (widgetState && (widgetState.version_major < 2 || !widgetState.version_major)) {
        widgetRendererSrc = 'jupyter-js-widgets@*/dist/embed.js';
      }
    } catch(e) {}

    jupyterWidgetsScript.src = widgetRendererSrc;

    document.body.appendChild(requireJsScript);
    document.body.appendChild(jupyterWidgetsScript);
  }

  document.addEventListener('DOMContentLoaded', addWidgetsRenderer);
}());
</script>

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="out-of-the-box-comparisons-for-specific-data-types">Out-of-the-box Comparisons for specific data types<a class="headerlink" href="#out-of-the-box-comparisons-for-specific-data-types" title="Permanent link">&para;</a></h1>
<p>Similarity is defined differently for types of data (e.g. names, dates of birth, postcodes, addresses, ids). The <a href="customising_comparisons.html#method-2-using-the-comparisontemplatelibrary">Comparison Template Library</a> contains functions to generate ready-made comparisons for a variety of data types.</p>
<p>Below are examples of how to structure comparisons for a variety of data types.</p>
<hr>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="date-comparisons">Date Comparisons<a class="headerlink" href="#date-comparisons" title="Permanent link">&para;</a></h2>
<p>Date comparisons are generally structured as: </p>
<ul>
<li>Null level  </li>
<li>Exact match  </li>
<li>Fuzzy match (<a href="comparators.html">using metric of choice</a>)  </li>
<li>Interval match (within X days/months/years)  </li>
<li>Else level</li>
</ul>
<p>The <a href="../comparison_template_library.html#splink.comparison_template_library">comparison_template_library</a> contains the <a href="../comparison_template_library.html##splink.comparison_template_library.DateComparisonBase">date_comparison</a> function which gives this structure, with some pre-defined parameters, out-of-the-box.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">splink.duckdb.duckdb_comparison_template_library</span> <span class="kn">import</span> <span class="n">date_comparison</span>

<span class="n">date_of_birth_comparison</span> <span class="o">=</span> <span class="n">date_comparison</span><span class="p">(</span><span class="s2">&quot;date_of_birth&quot;</span><span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Gives a comparison structured as follows:</p>
<div class="highlight"><pre><span></span><code>Comparison: Date of birth
├─-- ComparisonLevel: Exact match
├─-- ComparisonLevel: Up to one character difference
├─-- ComparisonLevel: Dates within 1 month of each other
├─-- ComparisonLevel: Dates within 1 year of each other
├─-- ComparisonLevel: Dates within 10 years of each other
├─-- ComparisonLevel: All other
</code></pre></div>
<p>Or, using <code>human_readable_description</code> to generate automatically from <code>date_of_birth_comparison</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">date_of_birth_comparison</span><span class="o">.</span><span class="n">human_readable_description</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stdout output_text">
<pre>
<code>Comparison &#39;Exact match vs. Date_Of_Birth within damerau-levenshtein threshold 1 vs. Dates within the following thresholds Month(s): 1, Year(s): 1, Year(s): 10 vs. anything else&#39; of &#34;date_of_birth&#34;.
Similarity is assessed using the following ComparisonLevels:
    - &#39;Null&#39; with SQL rule: &#34;date_of_birth_l&#34; IS NULL OR &#34;date_of_birth_r&#34; IS NULL
    - &#39;Exact match&#39; with SQL rule: &#34;date_of_birth_l&#34; = &#34;date_of_birth_r&#34;
    - &#39;Damerau_levenshtein &lt;= 1&#39; with SQL rule: damerau_levenshtein(&#34;date_of_birth_l&#34;, &#34;date_of_birth_r&#34;) &lt;= 1
    - &#39;Within 1 month&#39; with SQL rule: 
            abs(date_diff(&#39;month&#39;, &#34;date_of_birth_l&#34;,
              &#34;date_of_birth_r&#34;)) &lt;= 1

    - &#39;Within 1 year&#39; with SQL rule: 
            abs(date_diff(&#39;year&#39;, &#34;date_of_birth_l&#34;,
              &#34;date_of_birth_r&#34;)) &lt;= 1

    - &#39;Within 10 years&#39; with SQL rule: 
            abs(date_diff(&#39;year&#39;, &#34;date_of_birth_l&#34;,
              &#34;date_of_birth_r&#34;)) &lt;= 10

    - &#39;All other comparisons&#39; with SQL rule: ELSE

</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <a href="../comparison_template_library.html##splink.comparison_template_library.DateComparisonBase">date_comparison</a> function also allows the user flexibility to change the parameters and/or fuzzy matching comparison levels.</p>
<p>For example:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="n">date_of_birth_comparison</span> <span class="o">=</span> <span class="n">date_comparison</span><span class="p">(</span>
    <span class="s2">&quot;date_of_birth&quot;</span><span class="p">,</span>
    <span class="n">levenshtein_thresholds</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
    <span class="n">damerau_levenshtein_thresholds</span><span class="o">=</span><span class="p">[],</span>
    <span class="n">datediff_thresholds</span><span class="o">=</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="n">datediff_metrics</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;day&quot;</span><span class="p">,</span> <span class="s2">&quot;month&quot;</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">date_of_birth_comparison</span><span class="o">.</span><span class="n">human_readable_description</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stdout output_text">
<pre>
<code>Comparison &#39;Exact match vs. Date_Of_Birth within levenshtein threshold 2 vs. Dates within the following thresholds Day(s): 7, Month(s): 1, Year(s): 1 vs. anything else&#39; of &#34;date_of_birth&#34;.
Similarity is assessed using the following ComparisonLevels:
    - &#39;Null&#39; with SQL rule: &#34;date_of_birth_l&#34; IS NULL OR &#34;date_of_birth_r&#34; IS NULL
    - &#39;Exact match&#39; with SQL rule: &#34;date_of_birth_l&#34; = &#34;date_of_birth_r&#34;
    - &#39;Levenshtein &lt;= 2&#39; with SQL rule: levenshtein(&#34;date_of_birth_l&#34;, &#34;date_of_birth_r&#34;) &lt;= 2
    - &#39;Within 7 days&#39; with SQL rule: 
            abs(date_diff(&#39;day&#39;, &#34;date_of_birth_l&#34;,
              &#34;date_of_birth_r&#34;)) &lt;= 7

    - &#39;Within 1 month&#39; with SQL rule: 
            abs(date_diff(&#39;month&#39;, &#34;date_of_birth_l&#34;,
              &#34;date_of_birth_r&#34;)) &lt;= 1

    - &#39;Within 1 year&#39; with SQL rule: 
            abs(date_diff(&#39;year&#39;, &#34;date_of_birth_l&#34;,
              &#34;date_of_birth_r&#34;)) &lt;= 1

    - &#39;All other comparisons&#39; with SQL rule: ELSE

</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To see this as a specifications dictionary you can call</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="n">date_of_birth_comparison</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>{&#39;output_column_name&#39;: &#39;date_of_birth&#39;,
 &#39;comparison_levels&#39;: [{&#39;sql_condition&#39;: &#39;&#34;date_of_birth_l&#34; IS NULL OR &#34;date_of_birth_r&#34; IS NULL&#39;,
   &#39;label_for_charts&#39;: &#39;Null&#39;,
   &#39;is_null_level&#39;: True},
  {&#39;sql_condition&#39;: &#39;&#34;date_of_birth_l&#34; = &#34;date_of_birth_r&#34;&#39;,
   &#39;label_for_charts&#39;: &#39;Exact match&#39;},
  {&#39;sql_condition&#39;: &#39;levenshtein(&#34;date_of_birth_l&#34;, &#34;date_of_birth_r&#34;) &lt;= 2&#39;,
   &#39;label_for_charts&#39;: &#39;Levenshtein &lt;= 2&#39;},
  {&#39;sql_condition&#39;: &#39;\n            abs(date_diff(\&#39;day\&#39;, &#34;date_of_birth_l&#34;,\n              &#34;date_of_birth_r&#34;)) &lt;= 7\n        &#39;,
   &#39;label_for_charts&#39;: &#39;Within 7 days&#39;},
  {&#39;sql_condition&#39;: &#39;\n            abs(date_diff(\&#39;month\&#39;, &#34;date_of_birth_l&#34;,\n              &#34;date_of_birth_r&#34;)) &lt;= 1\n        &#39;,
   &#39;label_for_charts&#39;: &#39;Within 1 month&#39;},
  {&#39;sql_condition&#39;: &#39;\n            abs(date_diff(\&#39;year\&#39;, &#34;date_of_birth_l&#34;,\n              &#34;date_of_birth_r&#34;)) &lt;= 1\n        &#39;,
   &#39;label_for_charts&#39;: &#39;Within 1 year&#39;},
  {&#39;sql_condition&#39;: &#39;ELSE&#39;, &#39;label_for_charts&#39;: &#39;All other comparisons&#39;}],
 &#39;comparison_description&#39;: &#39;Exact match vs. Date_Of_Birth within levenshtein threshold 2 vs. Dates within the following thresholds Day(s): 7, Month(s): 1, Year(s): 1 vs. anything else&#39;}</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>which can be used as the basis for a more custom comparison, as shown in the <a href="customising_comparisons.html#method-4-providing-the-spec-as-a-dictionary">Defining and Customising Comparisons topic guide </a>, if desired.</p>
<hr>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="name-comparisons">Name Comparisons<a class="headerlink" href="#name-comparisons" title="Permanent link">&para;</a></h2>
<p>Name comparisons for an individual name column (e.g. forename, surname) are generally structured as: </p>
<ul>
<li>Null level  </li>
<li>Exact match  </li>
<li>Fuzzy match (<a href="comparators.html">using metric of choice</a>)  </li>
<li>Else level</li>
</ul>
<p>The <a href="../comparison_template_library.html##splink.comparison_template_library">comparison_template_library</a> contains the <a href="../comparison_template_library.html#splink.comparison_template_library.NameComparisonBase">name_comparison</a> function which gives this structure, with some pre-defined parameters, out-of-the-box.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">splink.duckdb.duckdb_comparison_template_library</span> <span class="kn">import</span> <span class="n">name_comparison</span>

<span class="n">first_name_comparison</span> <span class="o">=</span> <span class="n">name_comparison</span><span class="p">(</span><span class="s2">&quot;first_name&quot;</span><span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Gives a comparison structured as follows:</p>
<div class="highlight"><pre><span></span><code>Comparison: First Name
├─-- ComparisonLevel: Exact match
├─-- ComparisonLevel: Up to one character difference
├─-- ComparisonLevel: First Names with Jaro-Winkler similarity of 0.9 or greater 
├─-- ComparisonLevel: First Names with Jaro-Winkler similarity of 0.8 or greater
├─-- ComparisonLevel: All other
</code></pre></div>
<p>Or, using <code>human_readable_description</code> to generate automatically from <code>first_name_comparison</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">first_name_comparison</span><span class="o">.</span><span class="n">human_readable_description</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stdout output_text">
<pre>
<code>Comparison &#39;Exact match vs. First_Name within levenshtein threshold 1 vs. First_Name within damerau-levenshtein threshold 1 vs. First_Name within jaro_winkler thresholds 0.9, 0.8 vs. anything else&#39; of &#34;first_name&#34;.
Similarity is assessed using the following ComparisonLevels:
    - &#39;Null&#39; with SQL rule: &#34;first_name_l&#34; IS NULL OR &#34;first_name_r&#34; IS NULL
    - &#39;Exact match first_name&#39; with SQL rule: &#34;first_name_l&#34; = &#34;first_name_r&#34;
    - &#39;Damerau_levenshtein &lt;= 1&#39; with SQL rule: damerau_levenshtein(&#34;first_name_l&#34;, &#34;first_name_r&#34;) &lt;= 1
    - &#39;Jaro_winkler_similarity &gt;= 0.9&#39; with SQL rule: jaro_winkler_similarity(&#34;first_name_l&#34;, &#34;first_name_r&#34;) &gt;= 0.9
    - &#39;Jaro_winkler_similarity &gt;= 0.8&#39; with SQL rule: jaro_winkler_similarity(&#34;first_name_l&#34;, &#34;first_name_r&#34;) &gt;= 0.8
    - &#39;All other comparisons&#39; with SQL rule: ELSE

</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <a href="../comparison_template_library.html#splink.comparison_template_library.NameComparisonBase">name_comparison</a> function also allowing flexibility to change the parameters and/or fuzzy matching comparison levels.</p>
<p>For example:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="n">surname_comparison</span> <span class="o">=</span> <span class="n">name_comparison</span><span class="p">(</span>
    <span class="s2">&quot;surname&quot;</span><span class="p">,</span>
    <span class="n">phonetic_col_name</span><span class="o">=</span><span class="s2">&quot;surname_dm&quot;</span><span class="p">,</span>
    <span class="n">term_frequency_adjustments_name</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">levenshtein_thresholds</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
    <span class="n">damerau_levenshtein_thresholds</span><span class="o">=</span><span class="p">[],</span>
    <span class="n">jaro_winkler_thresholds</span><span class="o">=</span><span class="p">[],</span>
    <span class="n">jaccard_thresholds</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">surname_comparison</span><span class="o">.</span><span class="n">human_readable_description</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stdout output_text">
<pre>
<code>Comparison &#39;Exact match vs. Names with phonetic exact match vs. Surname within levenshtein threshold 2 vs. Surname within jaccard threshold 1 vs. anything else&#39; of &#34;surname&#34; and &#34;surname_dm&#34;.
Similarity is assessed using the following ComparisonLevels:
    - &#39;Null&#39; with SQL rule: &#34;surname_l&#34; IS NULL OR &#34;surname_r&#34; IS NULL
    - &#39;Exact match surname&#39; with SQL rule: &#34;surname_l&#34; = &#34;surname_r&#34;
    - &#39;Exact match surname_dm&#39; with SQL rule: &#34;surname_dm_l&#34; = &#34;surname_dm_r&#34;
    - &#39;Levenshtein &lt;= 2&#39; with SQL rule: levenshtein(&#34;surname_l&#34;, &#34;surname_r&#34;) &lt;= 2
    - &#39;Jaccard &gt;= 1&#39; with SQL rule: jaccard(&#34;surname_l&#34;, &#34;surname_r&#34;) &gt;= 1
    - &#39;All other comparisons&#39; with SQL rule: ELSE

</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Where <code>surname_dm</code> refers to a column which has used the DoubleMetaphone algorithm on <code>surname</code> to give a phonetic spelling. This helps to catch names which sounds the same but have different spellings (e.g. Stephens vs Stevens). For more on Phonetic Transformations, see the <a href="phonetic.html">topic guide</a>.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To see this as a specifications dictionary you can call</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="n">surname_comparison</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>{&#39;output_column_name&#39;: &#39;custom_surname_surname_dm&#39;,
 &#39;comparison_levels&#39;: [{&#39;sql_condition&#39;: &#39;&#34;surname_l&#34; IS NULL OR &#34;surname_r&#34; IS NULL&#39;,
   &#39;label_for_charts&#39;: &#39;Null&#39;,
   &#39;is_null_level&#39;: True},
  {&#39;sql_condition&#39;: &#39;&#34;surname_l&#34; = &#34;surname_r&#34;&#39;,
   &#39;label_for_charts&#39;: &#39;Exact match surname&#39;,
   &#39;tf_adjustment_column&#39;: &#39;surname&#39;,
   &#39;tf_adjustment_weight&#39;: 1.0},
  {&#39;sql_condition&#39;: &#39;&#34;surname_dm_l&#34; = &#34;surname_dm_r&#34;&#39;,
   &#39;label_for_charts&#39;: &#39;Exact match surname_dm&#39;},
  {&#39;sql_condition&#39;: &#39;levenshtein(&#34;surname_l&#34;, &#34;surname_r&#34;) &lt;= 2&#39;,
   &#39;label_for_charts&#39;: &#39;Levenshtein &lt;= 2&#39;},
  {&#39;sql_condition&#39;: &#39;jaccard(&#34;surname_l&#34;, &#34;surname_r&#34;) &gt;= 1&#39;,
   &#39;label_for_charts&#39;: &#39;Jaccard &gt;= 1&#39;},
  {&#39;sql_condition&#39;: &#39;ELSE&#39;, &#39;label_for_charts&#39;: &#39;All other comparisons&#39;}],
 &#39;comparison_description&#39;: &#39;Exact match vs. Names with phonetic exact match vs. Surname within levenshtein threshold 2 vs. Surname within jaccard threshold 1 vs. anything else&#39;}</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>which can be used as the basis for a more custom comparison, as shown in the <a href="customising_comparisons.html#method-4-providing-the-spec-as-a-dictionary">Defining and Customising Comparisons topic guide </a>, if desired.</p>
<hr>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="postcode-comparisons">Postcode Comparisons<a class="headerlink" href="#postcode-comparisons" title="Permanent link">&para;</a></h2>
<p>The <a href="../comparison_template_library.html##splink.comparison_template_library">comparison_template_library</a> contains the <a href="../comparison_template_library.html##splink.comparison_template_library.PostcodeComparisonBase">postcode_comparison</a> function which provides a sensible approach to comparing postcodes in terms of their constituent components, out-of-the-box. See <a href="feature_engineering.html">Feature Engineering</a> for more details.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">splink.duckdb.duckdb_comparison_template_library</span> <span class="kn">import</span> <span class="n">postcode_comparison</span>

<span class="n">pc_comparison</span> <span class="o">=</span> <span class="n">postcode_comparison</span><span class="p">(</span><span class="s2">&quot;postcode&quot;</span><span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Gives a comparison structured as follows:</p>
<div class="highlight"><pre><span></span><code>Comparison: Postcode
├─-- ComparisonLevel: Exact match
├─-- ComparisonLevel: Exact match on sector
├─-- ComparisonLevel: Exact match on district
├─-- ComparisonLevel: Exact match on area
├─-- ComparisonLevel: All other
</code></pre></div>
<p>Or, using <code>human_readable_description</code> to generate automatically from <code>pc_comparison</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">pc_comparison</span><span class="o">.</span><span class="n">human_readable_description</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stdout output_text">
<pre>
<code>Comparison &#39;Exact match on full postcode vs. exact match on sector vs. exact match on district vs. exact match on area vs. all other comparisons&#39; of &#34;postcode&#34;.
Similarity is assessed using the following ComparisonLevels:
    - &#39;Null&#39; with SQL rule: &#34;postcode_l&#34; IS NULL OR &#34;postcode_r&#34; IS NULL
    - &#39;Exact match postcode&#39; with SQL rule: &#34;postcode_l&#34; = &#34;postcode_r&#34;
    - &#39;Exact match Postcode Sector&#39; with SQL rule: 
        regexp_extract(&#34;postcode_l&#34;, &#39;^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9]&#39;)
     = 
        regexp_extract(&#34;postcode_r&#34;, &#39;^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9]&#39;)

    - &#39;Exact match Postcode District&#39; with SQL rule: 
        regexp_extract(&#34;postcode_l&#34;, &#39;^[A-Z]{1,2}[0-9][A-Z0-9]?&#39;)
     = 
        regexp_extract(&#34;postcode_r&#34;, &#39;^[A-Z]{1,2}[0-9][A-Z0-9]?&#39;)

    - &#39;Exact match Postcode Area&#39; with SQL rule: 
        regexp_extract(&#34;postcode_l&#34;, &#39;^[A-Z]{1,2}&#39;)
     = 
        regexp_extract(&#34;postcode_r&#34;, &#39;^[A-Z]{1,2}&#39;)

    - &#39;All other comparisons&#39; with SQL rule: ELSE

</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>where individual postcode components are extracted under-the-hood using the <code>regex_extract</code> argument.</p>
<p>Note that the 'Exact match Postcode District' level also captures matches on subdistricts where they exist in the data.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Performing comparisons based on substrings alone doesn't always give the best sense of whether two postcodes are close together since locations which are geographically close can be in different postcode regions e.g. London postcodes starting 'N' vs 'SW'. Given this, the <a href="../comparison_template_library.html##splink.comparison_template_library.PostcodeComparisonBase">postcode_comparison</a> function also allows the user flexibility to include <a href="../comparison_level_library.html#splink.comparison_level_library.DistanceFunctionLevelBase">cll.distance_in_km_level()</a> by supplying <code>lat_col</code>, <code>long_col</code> and <code>km_thresholds</code> arguments. This can help to improve results. (See <a href="feature_engineering.html">Feature Enginnering</a> for more details.)</p>
<p>Users also have the option to set <code>invalid_postcodes_as_null</code> to <code>True</code>. If <code>True</code>, postcodes that do not adhere to a valid postcode format as determined by <code>valid_postcode_regex</code> will be included in the null level. <code>valid_postcode_regex</code> defaults to <code>"^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][A-Z]{2}$"</code>.</p>
<p>For example:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="n">pc_comparison</span> <span class="o">=</span> <span class="n">postcode_comparison</span><span class="p">(</span>
    <span class="s2">&quot;postcode&quot;</span><span class="p">,</span>
    <span class="n">invalid_postcodes_as_null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">lat_col</span><span class="o">=</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span>
    <span class="n">long_col</span><span class="o">=</span><span class="s2">&quot;long&quot;</span><span class="p">,</span>
    <span class="n">km_thresholds</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pc_comparison</span><span class="o">.</span><span class="n">human_readable_description</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stdout output_text">
<pre>
<code>Comparison &#39;Exact match on full postcode vs. exact match on sector vs. exact match on district vs. exact match on area vs. Postcode within km_distance thresholds 1, 10, 50 vs. all other comparisons&#39; of &#34;postcode&#34;, &#34;long&#34; and &#34;lat&#34;.
Similarity is assessed using the following ComparisonLevels:
    - &#39;Null&#39; with SQL rule: 
        regexp_extract(&#34;postcode_l&#34;, &#39;^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][A-Z]{2}$&#39;)
     IS NULL OR 
        regexp_extract(&#34;postcode_r&#34;, &#39;^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][A-Z]{2}$&#39;)
     IS NULL OR

        regexp_extract(&#34;postcode_l&#34;, &#39;^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][A-Z]{2}$&#39;)
    ==&#39;&#39; OR 
        regexp_extract(&#34;postcode_r&#34;, &#39;^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][A-Z]{2}$&#39;)
     ==&#39;&#39;
    - &#39;Exact match postcode&#39; with SQL rule: &#34;postcode_l&#34; = &#34;postcode_r&#34;
    - &#39;Exact match Postcode Sector&#39; with SQL rule: 
        regexp_extract(&#34;postcode_l&#34;, &#39;^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9]&#39;)
     = 
        regexp_extract(&#34;postcode_r&#34;, &#39;^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9]&#39;)

    - &#39;Exact match Postcode District&#39; with SQL rule: 
        regexp_extract(&#34;postcode_l&#34;, &#39;^[A-Z]{1,2}[0-9][A-Z0-9]?&#39;)
     = 
        regexp_extract(&#34;postcode_r&#34;, &#39;^[A-Z]{1,2}[0-9][A-Z0-9]?&#39;)

    - &#39;Exact match Postcode Area&#39; with SQL rule: 
        regexp_extract(&#34;postcode_l&#34;, &#39;^[A-Z]{1,2}&#39;)
     = 
        regexp_extract(&#34;postcode_r&#34;, &#39;^[A-Z]{1,2}&#39;)

    - &#39;Distance less than 1km&#39; with SQL rule: 

        cast(
            acos(

        case
            when (
        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +
        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )
            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )
    ) &gt; 1 then 1
            when (
        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +
        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )
            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )
    ) &lt; -1 then -1
            else (
        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +
        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )
            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )
    )
        end

            ) * 6371
            as float
        )
     &lt;= 1

    - &#39;Distance less than 10km&#39; with SQL rule: 

        cast(
            acos(

        case
            when (
        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +
        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )
            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )
    ) &gt; 1 then 1
            when (
        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +
        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )
            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )
    ) &lt; -1 then -1
            else (
        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +
        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )
            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )
    )
        end

            ) * 6371
            as float
        )
     &lt;= 10

    - &#39;Distance less than 50km&#39; with SQL rule: 

        cast(
            acos(

        case
            when (
        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +
        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )
            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )
    ) &gt; 1 then 1
            when (
        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +
        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )
            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )
    ) &lt; -1 then -1
            else (
        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +
        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )
            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )
    )
        end

            ) * 6371
            as float
        )
     &lt;= 50

    - &#39;All other comparisons&#39; with SQL rule: ELSE

</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To see this as a specifications dictionary you can call</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="n">pc_comparison</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>{&#39;output_column_name&#39;: &#39;postcode&#39;,
 &#39;comparison_levels&#39;: [{&#39;sql_condition&#39;: &#39;\n        regexp_extract(&#34;postcode_l&#34;, \&#39;^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][A-Z]{2}$\&#39;)\n     IS NULL OR \n        regexp_extract(&#34;postcode_r&#34;, \&#39;^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][A-Z]{2}$\&#39;)\n     IS NULL OR\n                      \n        regexp_extract(&#34;postcode_l&#34;, \&#39;^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][A-Z]{2}$\&#39;)\n    ==\&#39;\&#39; OR \n        regexp_extract(&#34;postcode_r&#34;, \&#39;^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][A-Z]{2}$\&#39;)\n     ==\&#39;\&#39;&#39;,
   &#39;label_for_charts&#39;: &#39;Null&#39;,
   &#39;is_null_level&#39;: True},
  {&#39;sql_condition&#39;: &#39;&#34;postcode_l&#34; = &#34;postcode_r&#34;&#39;,
   &#39;label_for_charts&#39;: &#39;Exact match postcode&#39;},
  {&#39;sql_condition&#39;: &#39;\n        regexp_extract(&#34;postcode_l&#34;, \&#39;^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9]\&#39;)\n     = \n        regexp_extract(&#34;postcode_r&#34;, \&#39;^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9]\&#39;)\n    &#39;,
   &#39;label_for_charts&#39;: &#39;Exact match Postcode Sector&#39;},
  {&#39;sql_condition&#39;: &#39;\n        regexp_extract(&#34;postcode_l&#34;, \&#39;^[A-Z]{1,2}[0-9][A-Z0-9]?\&#39;)\n     = \n        regexp_extract(&#34;postcode_r&#34;, \&#39;^[A-Z]{1,2}[0-9][A-Z0-9]?\&#39;)\n    &#39;,
   &#39;label_for_charts&#39;: &#39;Exact match Postcode District&#39;},
  {&#39;sql_condition&#39;: &#39;\n        regexp_extract(&#34;postcode_l&#34;, \&#39;^[A-Z]{1,2}\&#39;)\n     = \n        regexp_extract(&#34;postcode_r&#34;, \&#39;^[A-Z]{1,2}\&#39;)\n    &#39;,
   &#39;label_for_charts&#39;: &#39;Exact match Postcode Area&#39;},
  {&#39;sql_condition&#39;: &#39;\n        \n        cast(\n            acos(\n                \n        case\n            when (\n        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +\n        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )\n            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )\n    ) &gt; 1 then 1\n            when (\n        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +\n        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )\n            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )\n    ) &lt; -1 then -1\n            else (\n        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +\n        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )\n            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )\n    )\n        end\n    \n            ) * 6371\n            as float\n        )\n     &lt;= 1\n        &#39;,
   &#39;label_for_charts&#39;: &#39;Distance less than 1km&#39;},
  {&#39;sql_condition&#39;: &#39;\n        \n        cast(\n            acos(\n                \n        case\n            when (\n        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +\n        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )\n            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )\n    ) &gt; 1 then 1\n            when (\n        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +\n        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )\n            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )\n    ) &lt; -1 then -1\n            else (\n        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +\n        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )\n            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )\n    )\n        end\n    \n            ) * 6371\n            as float\n        )\n     &lt;= 10\n        &#39;,
   &#39;label_for_charts&#39;: &#39;Distance less than 10km&#39;},
  {&#39;sql_condition&#39;: &#39;\n        \n        cast(\n            acos(\n                \n        case\n            when (\n        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +\n        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )\n            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )\n    ) &gt; 1 then 1\n            when (\n        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +\n        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )\n            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )\n    ) &lt; -1 then -1\n            else (\n        sin( radians(&#34;lat_l&#34;) ) * sin( radians(&#34;lat_r&#34;) ) +\n        cos( radians(&#34;lat_l&#34;) ) * cos( radians(&#34;lat_r&#34;) )\n            * cos( radians(&#34;long_r&#34; - &#34;long_l&#34;) )\n    )\n        end\n    \n            ) * 6371\n            as float\n        )\n     &lt;= 50\n        &#39;,
   &#39;label_for_charts&#39;: &#39;Distance less than 50km&#39;},
  {&#39;sql_condition&#39;: &#39;ELSE&#39;, &#39;label_for_charts&#39;: &#39;All other comparisons&#39;}],
 &#39;comparison_description&#39;: &#39;Exact match on full postcode vs. exact match on sector vs. exact match on district vs. exact match on area vs. Postcode within km_distance thresholds 1, 10, 50 vs. all other comparisons&#39;}</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>which can be used as the basis for a more custom comparison, as shown in the <a href="customising_comparisons.html#method-4-providing-the-spec-as-a-dictionary">Defining and Customising Comparisons topic guide </a>, if desired.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="forename-and-surname-comparisons">Forename and Surname Comparisons<a class="headerlink" href="#forename-and-surname-comparisons" title="Permanent link">&para;</a></h2>
<p>It can be helpful to construct a single comparison for for comparing the forename and surname of two records as:</p>
<ol>
<li>
<p>The Fellegi-Sunter model <strong>assumes that comparisons are independent</strong>. We know that forename and surname are usually correlated given the regional variation of names etc, so considering then in a single comparison can help to create better models.</p>
</li>
<li>
<p><strong>Term-frequencies</strong> of individual forename and surname individually does not necessarily reflect how common the combination of forename and surname are. 
For example, in the UK population “Mohammed Khan” is a relatively common full name despite neither name occurring frequently. For more information on term-frequencies, see the dedicated <a href="term-frequency.html">topic guide</a>.
Addressing forename and surname in a single comparison can allows the model to consider the joint term-frequency as well as individual.</p>
</li>
<li>
<p>It is common for some records to have <strong>swapped forename and surname by mistake</strong>. Addressing forename and surname in a single comparison can allows the model to consider these name inversions.</p>
</li>
</ol>
<p>Forename and Surname comparisons for an individual name column (e.g. forename, surname) are generally structured as: </p>
<ul>
<li>Null level  </li>
<li>Exact match Forename and Surname</li>
<li>Exact match Forename and Surname swapped</li>
<li>Exact match Surname</li>
<li>Exact match Forename</li>
<li>Fuzzy match Surname (<a href="comparators.html">using metric of choice</a>)</li>
<li>Fuzzy match Forename (<a href="comparators.html">using metric of choice</a>)</li>
<li>Else level</li>
</ul>
<p>The <a href="#method-2-using-the-comparisontemplatelibrary">comparison_template_library</a> contains the <a href="../comparison_template_library.html#splink.comparison_template_library.NameComparisonBase">forename_surname_comparison</a> function which gives this structure, with some pre-defined parameters, out-of-the-box.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">splink.duckdb.duckdb_comparison_template_library</span> <span class="kn">import</span> <span class="n">forename_surname_comparison</span>

<span class="n">name_comparison</span> <span class="o">=</span> <span class="n">forename_surname_comparison</span><span class="p">(</span><span class="s2">&quot;forename&quot;</span><span class="p">,</span> <span class="s2">&quot;surname&quot;</span><span class="p">)</span>
</code></pre></div>

</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Gives a comparison structured as follows:</p>
<div class="highlight"><pre><span></span><code>Comparison: First Name
├─-- ComparisonLevel: Exact match Forename and Surname
├─-- ComparisonLevel: Exact match Forename and Surname swapped
├─-- ComparisonLevel: Exact match Surname
├─-- ComparisonLevel: Exact match Forename
├─-- ComparisonLevel: Surnames with Jaro-Winkler similarity greater than 0.88
├─-- ComparisonLevel: Forenames with Jaro-Winkler similarity greater than 0.88
├─-- ComparisonLevel: All other
</code></pre></div>
<p>Or, using <code>human_readable_description</code> to generate automatically from <code>first_name_comparison</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">name_comparison</span><span class="o">.</span><span class="n">human_readable_description</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stdout output_text">
<pre>
<code>Comparison &#39;Exact match vs. Forename and surname columns reversed vs. Surname exact match vs. Forename exact match vs. Surname within jaro-winkler threshold 0.88 vs. Forename within jaro-winkler threshold 0.88 vs. anything else&#39; of &#34;forename&#34; and &#34;surname&#34;.
Similarity is assessed using the following ComparisonLevels:
    - &#39;Null&#39; with SQL rule: (&#34;forename_l&#34; IS NULL OR &#34;forename_r&#34; IS NULL) AND (&#34;surname_l&#34; IS NULL OR &#34;surname_r&#34; IS NULL)
    - &#39;Full name exact match&#39; with SQL rule: &#34;forename_l&#34; = &#34;forename_r&#34; AND &#34;surname_l&#34; = &#34;surname_r&#34;
    - &#39;Exact match on reversed cols&#39; with SQL rule: &#34;forename_l&#34; = &#34;surname_r&#34; and &#34;forename_r&#34; = &#34;surname_l&#34;
    - &#39;Exact match surname&#39; with SQL rule: &#34;surname_l&#34; = &#34;surname_r&#34;
    - &#39;Exact match forename&#39; with SQL rule: &#34;forename_l&#34; = &#34;forename_r&#34;
    - &#39;Jaro_winkler_similarity surname &gt;= 0.88&#39; with SQL rule: jaro_winkler_similarity(&#34;surname_l&#34;, &#34;surname_r&#34;) &gt;= 0.88
    - &#39;Jaro_winkler_similarity forename &gt;= 0.88&#39; with SQL rule: jaro_winkler_similarity(&#34;forename_l&#34;, &#34;forename_r&#34;) &gt;= 0.88
    - &#39;All other comparisons&#39; with SQL rule: ELSE

</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <a href="../comparison_template_library.html#splink.comparison_template_library.ForenameSurnameComparisonBase">forename_surname_comparison</a> function also allowing flexibility to change the parameters and/or fuzzy matching comparison levels.</p>
<p>For example:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="n">full_name_comparison</span> <span class="o">=</span> <span class="n">forename_surname_comparison</span><span class="p">(</span>
    <span class="s2">&quot;forename&quot;</span><span class="p">,</span>
    <span class="s2">&quot;surname&quot;</span><span class="p">,</span>
    <span class="n">term_frequency_adjustments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tf_adjustment_col_forename_and_surname</span><span class="o">=</span><span class="s2">&quot;full_name&quot;</span><span class="p">,</span>
    <span class="n">phonetic_forename_col_name</span><span class="o">=</span><span class="s2">&quot;forename_dm&quot;</span><span class="p">,</span>
    <span class="n">phonetic_surname_col_name</span><span class="o">=</span><span class="s2">&quot;surname_dm&quot;</span><span class="p">,</span>
    <span class="n">levenshtein_thresholds</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
    <span class="n">jaro_winkler_thresholds</span><span class="o">=</span><span class="p">[],</span>
    <span class="n">jaccard_thresholds</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">full_name_comparison</span><span class="o">.</span><span class="n">human_readable_description</span><span class="p">)</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stdout output_text">
<pre>
<code>Comparison &#39;Exact match vs. Phonetic match forename and surname vs. Forename and surname columns reversed vs. Surname exact match vs. Forename exact match vs. Surname within levenshtein threshold 2 vs. Surname within jaccard threshold 1 vs. Forename within levenshtein threshold 2 vs. Forename within jaccard threshold 1 vs. anything else&#39; of &#34;forename&#34;, &#34;surname&#34;, &#34;forename_dm&#34; and &#34;surname_dm&#34;.
Similarity is assessed using the following ComparisonLevels:
    - &#39;Null&#39; with SQL rule: (&#34;forename_l&#34; IS NULL OR &#34;forename_r&#34; IS NULL) AND (&#34;surname_l&#34; IS NULL OR &#34;surname_r&#34; IS NULL)
    - &#39;Full name exact match&#39; with SQL rule: &#34;forename_l&#34; = &#34;forename_r&#34; AND &#34;surname_l&#34; = &#34;surname_r&#34;
    - &#39;Full name phonetic match&#39; with SQL rule: &#34;forename_dm_l&#34;=&#34;forename_dm_r&#34; AND &#34;surname_dm_l&#34; = &#34;surname_dm_r&#34;
    - &#39;Exact match on reversed cols&#39; with SQL rule: &#34;forename_l&#34; = &#34;surname_r&#34; and &#34;forename_r&#34; = &#34;surname_l&#34;
    - &#39;Exact match surname&#39; with SQL rule: &#34;surname_l&#34; = &#34;surname_r&#34;
    - &#39;Exact match forename&#39; with SQL rule: &#34;forename_l&#34; = &#34;forename_r&#34;
    - &#39;Levenshtein surname &lt;= 2&#39; with SQL rule: levenshtein(&#34;surname_l&#34;, &#34;surname_r&#34;) &lt;= 2
    - &#39;Jaccard surname &gt;= 1&#39; with SQL rule: jaccard(&#34;surname_l&#34;, &#34;surname_r&#34;) &gt;= 1
    - &#39;Levenshtein forename &lt;= 2&#39; with SQL rule: levenshtein(&#34;forename_l&#34;, &#34;forename_r&#34;) &lt;= 2
    - &#39;Jaccard forename &gt;= 1&#39; with SQL rule: jaccard(&#34;forename_l&#34;, &#34;forename_r&#34;) &gt;= 1
    - &#39;All other comparisons&#39; with SQL rule: ELSE

</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Where:</p>
<ul>
<li>
<p><code>forename_dm</code> and <code>surname_dm</code> refer to columns which have used the DoubleMetaphone algorithm on <code>forename</code> and <code>surname</code> to give a phonetic spelling. This helps to catch names which sounds the same but have different spellings (e.g. Stephens vs Stevens). For more on Phonetic Transformations, see the <a href="phonetic.html">topic guide</a>. These columns will have to already exist in the dataset, or be created in the <a href="feature_engineering.html#phonetic-transformations">feature engineering</a> stage when preparing datasets for linking.</p>
</li>
<li>
<p><code>full_name</code> is a column containing <code>forename</code> and <code>surname</code> so that the model can consider the term-frequency of the full name, as well as <code>forename</code> and <code>surname</code> individually. These columns will have to already exist in the dataset, or be created in the <a href="feature_engineering.html#full-name">feature engineering</a> stage when preparing datasets for linking.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To see this as a specifications dictionary you can call</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="highlight"><pre><span></span><code><span class="n">full_name_comparison</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()</span>
</code></pre></div>

</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>{&#39;output_column_name&#39;: &#39;custom_forename_surname_forename_dm_surname_dm&#39;,
 &#39;comparison_levels&#39;: [{&#39;sql_condition&#39;: &#39;(&#34;forename_l&#34; IS NULL OR &#34;forename_r&#34; IS NULL) AND (&#34;surname_l&#34; IS NULL OR &#34;surname_r&#34; IS NULL)&#39;,
   &#39;label_for_charts&#39;: &#39;Null&#39;,
   &#39;is_null_level&#39;: True},
  {&#39;sql_condition&#39;: &#39;&#34;forename_l&#34; = &#34;forename_r&#34; AND &#34;surname_l&#34; = &#34;surname_r&#34;&#39;,
   &#39;label_for_charts&#39;: &#39;Full name exact match&#39;,
   &#39;tf_adjustment_column&#39;: &#39;full_name&#39;,
   &#39;tf_adjustment_weight&#39;: 1.0},
  {&#39;sql_condition&#39;: &#39;&#34;forename_dm_l&#34;=&#34;forename_dm_r&#34; AND &#34;surname_dm_l&#34; = &#34;surname_dm_r&#34;&#39;,
   &#39;label_for_charts&#39;: &#39;Full name phonetic match&#39;,
   &#39;tf_adjustment_column&#39;: &#39;full_name&#39;,
   &#39;tf_adjustment_weight&#39;: 1.0},
  {&#39;sql_condition&#39;: &#39;&#34;forename_l&#34; = &#34;surname_r&#34; and &#34;forename_r&#34; = &#34;surname_l&#34;&#39;,
   &#39;label_for_charts&#39;: &#39;Exact match on reversed cols&#39;,
   &#39;tf_adjustment_column&#39;: &#39;full_name&#39;,
   &#39;tf_adjustment_weight&#39;: 1.0},
  {&#39;sql_condition&#39;: &#39;&#34;surname_l&#34; = &#34;surname_r&#34;&#39;,
   &#39;label_for_charts&#39;: &#39;Exact match surname&#39;,
   &#39;tf_adjustment_column&#39;: &#39;surname&#39;,
   &#39;tf_adjustment_weight&#39;: 1.0},
  {&#39;sql_condition&#39;: &#39;&#34;forename_l&#34; = &#34;forename_r&#34;&#39;,
   &#39;label_for_charts&#39;: &#39;Exact match forename&#39;,
   &#39;tf_adjustment_column&#39;: &#39;forename&#39;,
   &#39;tf_adjustment_weight&#39;: 1.0},
  {&#39;sql_condition&#39;: &#39;levenshtein(&#34;surname_l&#34;, &#34;surname_r&#34;) &lt;= 2&#39;,
   &#39;label_for_charts&#39;: &#39;Levenshtein surname &lt;= 2&#39;},
  {&#39;sql_condition&#39;: &#39;jaccard(&#34;surname_l&#34;, &#34;surname_r&#34;) &gt;= 1&#39;,
   &#39;label_for_charts&#39;: &#39;Jaccard surname &gt;= 1&#39;},
  {&#39;sql_condition&#39;: &#39;levenshtein(&#34;forename_l&#34;, &#34;forename_r&#34;) &lt;= 2&#39;,
   &#39;label_for_charts&#39;: &#39;Levenshtein forename &lt;= 2&#39;},
  {&#39;sql_condition&#39;: &#39;jaccard(&#34;forename_l&#34;, &#34;forename_r&#34;) &gt;= 1&#39;,
   &#39;label_for_charts&#39;: &#39;Jaccard forename &gt;= 1&#39;},
  {&#39;sql_condition&#39;: &#39;ELSE&#39;, &#39;label_for_charts&#39;: &#39;All other comparisons&#39;}],
 &#39;comparison_description&#39;: &#39;Exact match vs. Phonetic match forename and surname vs. Forename and surname columns reversed vs. Surname exact match vs. Forename exact match vs. Surname within levenshtein threshold 2 vs. Surname within jaccard threshold 1 vs. Forename within levenshtein threshold 2 vs. Forename within jaccard threshold 1 vs. anything else&#39;}</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Which can be used as the basis for a more custom comparison, as shown in the <a href="customising_comparisons.html#method-4-providing-the-spec-as-a-dictionary">Defining and Customising Comparisons topic guide </a>, if desired.</p>
</div>
</div>
</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="customising_comparisons.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Defining and customising comparisons" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Defining and customising comparisons
              </div>
            </div>
          </a>
        
        
          
          <a href="choosing_comparators.html" class="md-footer__link md-footer__link--next" aria-label="Next: Choosing comparators and thresholds" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Choosing comparators and thresholds
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate", "content.code.copy", "content.tabs.link", "content.tooltips", "header.autohide", "search.highlight", "search.share", "search.suggest", "navigation.footer"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.b4d07000.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>