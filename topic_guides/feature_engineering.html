
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="querying_splink_results.html">
      
      
        <link rel="next" href="customising_comparisons.html">
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.15">
    
    
      
        <title>Feature Engineering - Splink</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../css/custom.css">
    
      <link rel="stylesheet" href="../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#feature-engineering-for-data-linkage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Splink" class="md-header__button md-logo" aria-label="Splink" data-md-component="logo">
      
  <img src="../img/favicon.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Splink
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Feature Engineering
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="purple" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/moj-analytical-services/splink" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Splink" class="md-nav__button md-logo" aria-label="Splink" data-md-component="logo">
      
  <img src="../img/favicon.ico" alt="logo">

    </a>
    Splink
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/moj-analytical-services/splink" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installations.html" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/00_Tutorial_Introduction.html" class="md-nav__link">
        0. Tutorial introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/01_Prerequisites.html" class="md-nav__link">
        1. Data prep prerequisites
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/02_Exploratory_analysis.html" class="md-nav__link">
        2. Exploratory analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/03_Blocking.html" class="md-nav__link">
        3. Blocking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/04_Estimating_model_parameters.html" class="md-nav__link">
        4. Estimating model parameters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/05_Predicting_results.html" class="md-nav__link">
        5. Predicting results
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/06_Visualising_predictions.html" class="md-nav__link">
        6. Visualising predictions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/07_Quality_assurance.html" class="md-nav__link">
        7. Quality assurance
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples_index.html" class="md-nav__link">
        Examples index
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
      
      
      
        <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
          DuckDB
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          DuckDB
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_deduplicate_50k_synthetic.html" class="md-nav__link">
        Deduplicate 50k rows historical persons
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_transactions.html" class="md-nav__link">
        Linking financial transactions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_link_only.html" class="md-nav__link">
        Linking two tables of persons
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_real_time_record_linkage.html" class="md-nav__link">
        Real time record linkage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_accuracy_analysis_from_labels_column.html" class="md-nav__link">
        QA from ground truth column
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_pairwise_labels.html" class="md-nav__link">
        Estimating m probabilities from labels
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_quick_and_dirty_persons.html" class="md-nav__link">
        Quick and dirty persons model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_febrl3.html" class="md-nav__link">
        Febrl3 Dedupe
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_febrl4.html" class="md-nav__link">
        Febrl4 link-only
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
      
      
      
        <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
          PySpark
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          PySpark
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demos/example_simple_pyspark.html" class="md-nav__link">
        Deduplication using Pyspark
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Topic Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Topic Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="backends.html" class="md-nav__link">
        Splink's SQL backends - Spark, DuckDB etc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="link_type.html" class="md-nav__link">
        Link type - linking vs deduping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="querying_splink_results.html" class="md-nav__link">
        Retrieving and querying Splink results
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Feature Engineering
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="feature_engineering.html" class="md-nav__link md-nav__link--active">
        Feature Engineering
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#postcodes" class="md-nav__link">
    Postcodes
  </a>
  
    <nav class="md-nav" aria-label="Postcodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#phonetic-transformations" class="md-nav__link">
    Phonetic transformations
  </a>
  
    <nav class="md-nav" aria-label="Phonetic transformations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_1" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#full-name" class="md-nav__link">
    Full name
  </a>
  
    <nav class="md-nav" aria-label="Full name">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_2" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
          Comparing Records
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_5">
          <span class="md-nav__icon md-icon"></span>
          Comparing Records
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="customising_comparisons.html" class="md-nav__link">
        Defining and customising comparisons
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="comparison_templates.html" class="md-nav__link">
        Out-of-the-box comparisons
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5_3" >
      
      
      
        <label class="md-nav__link" for="__nav_5_5_3" id="__nav_5_5_3_label" tabindex="0">
          Comparing strings
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_5_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_5_3">
          <span class="md-nav__icon md-icon"></span>
          Comparing strings
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="choosing_comparators.html" class="md-nav__link">
        Choosing comparators and thresholds
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="comparators.html" class="md-nav__link">
        String comparators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="phonetic.html" class="md-nav__link">
        Phonetic transformations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="term-frequency.html" class="md-nav__link">
        Term-Frequency adjustments
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
      
      
      
        <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
          Performance
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_6">
          <span class="md-nav__icon md-icon"></span>
          Performance
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="drivers_of_performance.html" class="md-nav__link">
        Run times, performance and linking large data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="blocking_rules.html" class="md-nav__link">
        Blocking rules for prediction vs estimation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="optimising_spark.html" class="md-nav__link">
        Optimising Spark performance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="salting.html" class="md-nav__link">
        Salting blocking rules
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
      
      
      
        <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
          Linker API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          Linker API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../linker.html" class="md-nav__link">
        Full API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../linkerexp.html" class="md-nav__link">
        Exploratory analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../linkerest.html" class="md-nav__link">
        Estimating model parameters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../linkerpred.html" class="md-nav__link">
        Predicting results
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../linkerqa.html" class="md-nav__link">
        Visualisation and quality assurance
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../em_training_session.html" class="md-nav__link">
        EM Training Session API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SplinkDataFrame.html" class="md-nav__link">
        SplinkDataFrame API
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
      
      
      
        <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
          Comparisons API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_4">
          <span class="md-nav__icon md-icon"></span>
          Comparisons API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../comparison.html" class="md-nav__link">
        Comparison
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../comparison_level.html" class="md-nav__link">
        Comparison Level
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_5" >
      
      
      
        <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0">
          Comparisons Library API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_5">
          <span class="md-nav__icon md-icon"></span>
          Comparisons Library API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../comparison_library.html" class="md-nav__link">
        Comparison Library
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../comparison_template_library.html" class="md-nav__link">
        Comparison Template Library
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../comparison_level_library.html" class="md-nav__link">
        Comparison Level Library
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../comparison_level_composition.html" class="md-nav__link">
        Comparison Composition
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../settingseditor/editor.html" class="md-nav__link">
        Settings Editor
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../settings_dict_guide.html" class="md-nav__link">
        Settings dictionary reference
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
      
      
      
        <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
          Developers' guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Developers' guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1" >
      
      
      
        <label class="md-nav__link" for="__nav_9_1" id="__nav_9_1_label" tabindex="0">
          Making Changes to Splink
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_1">
          <span class="md-nav__icon md-icon"></span>
          Making Changes to Splink
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/changing_splink/building_env_locally.html" class="md-nav__link">
        Building a Virtual Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/changing_splink/lint.html" class="md-nav__link">
        Linting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/changing_splink/build_docs_locally.html" class="md-nav__link">
        Building Docs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/changing_splink/testing.html" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/changing_splink/releases.html" class="md-nav__link">
        Releasing a Package Version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/caching.html" class="md-nav__link">
        Caching and pipelining
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/debug_modes.html" class="md-nav__link">
        Understanding and debugging Splink
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/spark_pipelining_and_caching.html" class="md-nav__link">
        Spark caching
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/transpilation.html" class="md-nav__link">
        Transpilation using sqlglot
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_6" >
      
      
      
        <label class="md-nav__link" for="__nav_9_6" id="__nav_9_6_label" tabindex="0">
          Comparisons and comparison levels
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_6">
          <span class="md-nav__icon md-icon"></span>
          Comparisons and comparison levels
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/comparisons/new_library_comparisons_and_levels.html" class="md-nav__link">
        Creating new comparisons and comparison levels
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/comparisons/extending_library_comparisons_and_levels.html" class="md-nav__link">
        Extending existing comparisons and comparison levels
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dev_guides/udfs.html" class="md-nav__link">
        User-Defined Functions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#postcodes" class="md-nav__link">
    Postcodes
  </a>
  
    <nav class="md-nav" aria-label="Postcodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#phonetic-transformations" class="md-nav__link">
    Phonetic transformations
  </a>
  
    <nav class="md-nav" aria-label="Phonetic transformations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_1" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#full-name" class="md-nav__link">
    Full name
  </a>
  
    <nav class="md-nav" aria-label="Full name">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_2" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  

  <nav class="md-tags" >
    
      
      
        <span class="md-tag">API</span>
      
    
      
      
        <span class="md-tag">Feature Engineering</span>
      
    
      
      
        <span class="md-tag">Comparisons</span>
      
    
      
      
        <span class="md-tag">Postcode</span>
      
    
      
      
        <span class="md-tag">Phonetic Transformations</span>
      
    
      
      
        <span class="md-tag">Soundex</span>
      
    
      
      
        <span class="md-tag">Metaphone</span>
      
    
      
      
        <span class="md-tag">Double Metaphone</span>
      
    
  </nav>



  
  


<h1 id="feature-engineering-for-data-linkage">Feature Engineering for Data Linkage<a class="headerlink" href="#feature-engineering-for-data-linkage" title="Permanent link">&para;</a></h1>
<p>During record linkage, the features in a given dataset are used to provide evidence as to whether two records are a match. Like any predictive model, the quality of a Splink model is dictated by the features provided. </p>
<p>Below are some examples of features that be created from common columns, and how to create more detailed comparisons with them in a Splink model.</p>
<hr>

<h2 id="postcodes">Postcodes<a class="headerlink" href="#postcodes" title="Permanent link">&para;</a></h2>
<p>A sensible approach to comparing postcodes is to consider their consituent components. For example, UK postcodes can be broken down into the following substrings:</p>
<p><img alt="UK postcode components from https://ideal-postcodes.co.uk/guides/uk-postcode-format" src="../img/postcode_components.png" />
See <a href="https://ideal-postcodes.co.uk/guides/uk-postcode-format">image source</a> for more details.</p>
<p>Splink already includes a pre-built <a href="../comparison_template_library.html##splink.comparison_template_library.PostcodeComparisonBase">postcode comparison template</a> which does this for you, generating by default a comparison with levels for an exact match on full postcode, sector, district and area in turn. These individual postcode components are engineered under-the-hood using the <code>regex_extract</code> argument (see below and <a href="comparison_templates.html">comparison_templates.ipynb</a> for more details).</p>
<p>Code examples to use the comparison template:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">DuckDB</label><label for="__tabbed_1_2">Spark</label><label for="__tabbed_1_3">Athena</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">splink.duckdb.duckdb_comparison_template_library</span> <span class="k">as</span> <span class="nn">ctl</span>

<span class="n">pc_comparison</span> <span class="o">=</span> <span class="n">ctl</span><span class="o">.</span><span class="n">postcode_comparison</span><span class="p">(</span><span class="s2">&quot;postcode&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pc_comparison</span><span class="o">.</span><span class="n">human_readable_description</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">splink.spark.spark_comparison_template_library</span> <span class="k">as</span> <span class="nn">ctl</span>

<span class="n">pc_comparison</span> <span class="o">=</span> <span class="n">ctl</span><span class="o">.</span><span class="n">postcode_comparison</span><span class="p">(</span><span class="s2">&quot;postcode&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pc_comparison</span><span class="o">.</span><span class="n">human_readable_description</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">splink.athena.athena_comparison_template_library</span> <span class="k">as</span> <span class="nn">ctl</span>

<span class="n">pc_comparison</span> <span class="o">=</span> <span class="n">ctl</span><span class="o">.</span><span class="n">postcode_comparison</span><span class="p">(</span><span class="s2">&quot;postcode&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pc_comparison</span><span class="o">.</span><span class="n">human_readable_description</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<details class="note">
<summary>Output</summary>
<blockquote>
<p>Comparison 'Exact match on full postcode vs. exact match on sector vs. exact match on district vs. exact match on area vs. all other comparisons' of "postcode".</p>
<p>Similarity is assessed using the following ComparisonLevels:</p>
<ul>
<li>'Null' with SQL rule: "postcode_l" IS NULL OR "postcode_r" IS NULL</li>
<li>'Exact match postcode' with SQL rule: "postcode_l" = "postcode_r"</li>
<li>
<p>'Exact match Postcode Sector' with SQL rule: 
        regexp_extract("postcode_l", '^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9]')
    = 
        regexp_extract("postcode_r", '^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9]')</p>
</li>
<li>
<p>'Exact match Postcode District' with SQL rule: 
        regexp_extract("postcode_l", '^[A-Z]{1,2}[0-9][A-Z0-9]?')
    = 
        regexp_extract("postcode_r", '^[A-Z]{1,2}[0-9][A-Z0-9]?')</p>
</li>
<li>
<p>'Exact match Postcode Area' with SQL rule: 
        regexp_extract("postcode_l", '^[A-Z]{1,2}')
    = 
        regexp_extract("postcode_r", '^[A-Z]{1,2}')</p>
</li>
<li>
<p>'All other comparisons' with SQL rule: ELSE</p>
</li>
</ul>
</blockquote>
</details>
<p>Note that the 'Exact match Postcode District' level also captures matches on subdistricts where they exist in the data.</p>
<p>However, performing comparisons based on substrings alone doesn't always give the best sense of whether two postcodes are close together since locations which are geographically close can be in different postcode regions e.g. London postcodes starting 'N' vs 'SW'.</p>
<p>Fortunately, Splink includes functions <a href="../comparison_level_library.html#splink.comparison_level_library.DistanceFunctionLevelBase">cll.distance_in_km_level()</a> and <a href="../comparison_library.html#splink.comparison_library.DistanceInKMAtThresholdsComparisonBase">cl.distance_in_km_at_thresholds()</a> to calculate the physical distance between two sets of latitude and longitude coordinates. 
Users have the option to include <code>cll.distance_in_km_level()</code> as additional levels in the <code>postcode_comparison()</code> template by supplying <code>lat_col</code>, <code>long_col</code> and <code>km_thresholds</code> arguments. Doing so can help to improve results. Latitude and longitude coordinates can be derived from a postcode column as described in the example below.</p>
<h3 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h3>
<p>There are a number of open source repositories of geospatial data that can be used for linkage, one example is <a href="http://download.geonames.org/export/zip/">geonames</a>. </p>
<p>Below is an example of adding latitude and longitude columns from geonames to create a more nuanced comparison.</p>
<p>Read in a dataset with postcodes:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;/PATH/TO/DEMO/DATA/historical_figures_with_errors_50k.parquet&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;postcode_fake&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;postcode_fake&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<details class="note">
<summary>Output</summary>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="left">unique_id</th>
<th align="left">cluster</th>
<th align="left">full_name</th>
<th align="left">first_and_surname</th>
<th align="left">first_name</th>
<th align="left">surname</th>
<th align="left">dob</th>
<th align="left">birth_place</th>
<th align="left">postcode_fake</th>
<th align="left">gender</th>
<th align="left">occupation</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">0</td>
<td align="left">Q2296770-1</td>
<td align="left">Q2296770</td>
<td align="left">thomas clifford, 1st baron clifford of chudleigh</td>
<td align="left">thomas chudleigh</td>
<td align="left">thomas</td>
<td align="left">chudleigh</td>
<td align="left">1630-08-01</td>
<td align="left">devon</td>
<td align="left">TQ13 8DF</td>
<td align="left">male</td>
<td align="left">politician</td>
</tr>
<tr>
<td align="right">1</td>
<td align="left">Q2296770-2</td>
<td align="left">Q2296770</td>
<td align="left">thomas of chudleigh</td>
<td align="left">thomas chudleigh</td>
<td align="left">thomas</td>
<td align="left">chudleigh</td>
<td align="left">1630-08-01</td>
<td align="left">devon</td>
<td align="left">TQ13 8DF</td>
<td align="left">male</td>
<td align="left">politician</td>
</tr>
<tr>
<td align="right">2</td>
<td align="left">Q2296770-3</td>
<td align="left">Q2296770</td>
<td align="left">tom 1st baron clifford of chudleigh</td>
<td align="left">tom chudleigh</td>
<td align="left">tom</td>
<td align="left">chudleigh</td>
<td align="left">1630-08-01</td>
<td align="left">devon</td>
<td align="left">TQ13 8DF</td>
<td align="left">male</td>
<td align="left">politician</td>
</tr>
<tr>
<td align="right">3</td>
<td align="left">Q2296770-4</td>
<td align="left">Q2296770</td>
<td align="left">thomas 1st chudleigh</td>
<td align="left">thomas chudleigh</td>
<td align="left">thomas</td>
<td align="left">chudleigh</td>
<td align="left">1630-08-01</td>
<td align="left">devon</td>
<td align="left">TQ13 8HU</td>
<td align="left"></td>
<td align="left">politician</td>
</tr>
<tr>
<td align="right">4</td>
<td align="left">Q2296770-5</td>
<td align="left">Q2296770</td>
<td align="left">thomas clifford, 1st baron chudleigh</td>
<td align="left">thomas chudleigh</td>
<td align="left">thomas</td>
<td align="left">chudleigh</td>
<td align="left">1630-08-01</td>
<td align="left">devon</td>
<td align="left">TQ13 8DF</td>
<td align="left"></td>
<td align="left">politician</td>
</tr>
</tbody>
</table>
</details>
<p>Then read in a list of GB postcodes downloaded from <a href="http://download.geonames.org/export/zip/">geonames</a>.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;country_code&#39;</span><span class="p">,</span> <span class="s1">&#39;postal_code&#39;</span><span class="p">,</span> <span class="s1">&#39;place_name&#39;</span><span class="p">,</span> <span class="s1">&#39;admin_name1&#39;</span><span class="p">,</span> <span class="s1">&#39;admin_code1&#39;</span><span class="p">,</span> <span class="s1">&#39;admin_name2&#39;</span><span class="p">,</span> <span class="s1">&#39;admin_code2&#39;</span><span class="p">,</span> <span class="s1">&#39;admin_name3&#39;</span><span class="p">,</span> <span class="s1">&#39;admin_code3&#39;</span><span class="p">,</span> <span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">,</span><span class="s1">&#39;accuracy&#39;</span><span class="p">]</span>
<span class="n">postcodes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;GB_full.txt&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">)</span>
<span class="n">postcodes</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div>
<details class="note">
<summary>Output</summary>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="left">country_code</th>
<th align="left">postal_code</th>
<th align="left">place_name</th>
<th align="left">admin_name1</th>
<th align="left">admin_code1</th>
<th align="left">admin_name2</th>
<th align="right">admin_code2</th>
<th align="left">admin_name3</th>
<th align="left">admin_code3</th>
<th align="right">latitude</th>
<th align="right">longitude</th>
<th align="right">accuracy</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">0</td>
<td align="left">GB</td>
<td align="left">AL3 8QE</td>
<td align="left">Slip End</td>
<td align="left">England</td>
<td align="left">ENG</td>
<td align="left">Bedfordshire</td>
<td align="right">nan</td>
<td align="left">Central Bedfordshire</td>
<td align="left">E06000056</td>
<td align="right">51.8479</td>
<td align="right">-0.4474</td>
<td align="right">6</td>
</tr>
<tr>
<td align="right">1</td>
<td align="left">GB</td>
<td align="left">AL5 3NG</td>
<td align="left">Harpenden</td>
<td align="left">England</td>
<td align="left">ENG</td>
<td align="left">Bedfordshire</td>
<td align="right">nan</td>
<td align="left">Central Bedfordshire</td>
<td align="left">E06000056</td>
<td align="right">51.8321</td>
<td align="right">-0.383</td>
<td align="right">6</td>
</tr>
<tr>
<td align="right">2</td>
<td align="left">GB</td>
<td align="left">AL5 3NS</td>
<td align="left">Hyde</td>
<td align="left">England</td>
<td align="left">ENG</td>
<td align="left">Bedfordshire</td>
<td align="right">nan</td>
<td align="left">Central Bedfordshire</td>
<td align="left">E06000056</td>
<td align="right">51.8333</td>
<td align="right">-0.3763</td>
<td align="right">6</td>
</tr>
<tr>
<td align="right">3</td>
<td align="left">GB</td>
<td align="left">AL5 3QF</td>
<td align="left">Hyde</td>
<td align="left">England</td>
<td align="left">ENG</td>
<td align="left">Bedfordshire</td>
<td align="right">nan</td>
<td align="left">Central Bedfordshire</td>
<td align="left">E06000056</td>
<td align="right">51.8342</td>
<td align="right">-0.3851</td>
<td align="right">6</td>
</tr>
<tr>
<td align="right">4</td>
<td align="left">GB</td>
<td align="left">B10 0AB</td>
<td align="left">Birmingham</td>
<td align="left">England</td>
<td align="left">ENG</td>
<td align="left">West Midlands</td>
<td align="right">nan</td>
<td align="left">Birmingham District (B)</td>
<td align="left">E08000025</td>
<td align="right">52.4706</td>
<td align="right">-1.875</td>
<td align="right">6</td>
</tr>
</tbody>
</table>
</details>
<p>Now combine the lat-long coordinates from the <code>GB_full.txt</code> lookup.</p>
<div class="highlight"><pre><span></span><code><span class="n">df_with_coordinates</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">postcodes</span><span class="p">[[</span><span class="s2">&quot;postal_code&quot;</span><span class="p">,</span> <span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="s2">&quot;longitude&quot;</span><span class="p">]],</span> 
                                    <span class="n">left_on</span><span class="o">=</span><span class="s2">&quot;postcode_fake&quot;</span><span class="p">,</span> 
                                    <span class="n">right_on</span><span class="o">=</span><span class="s2">&quot;postal_code&quot;</span><span class="p">,</span>
                                    <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
<span class="n">df_with_coordinates</span> <span class="o">=</span> <span class="n">df_with_coordinates</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">&#39;postcode_fake&#39;</span><span class="p">:</span><span class="s1">&#39;postcode&#39;</span><span class="p">},</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">df_with_coordinates</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<details class="note">
<summary>Output</summary>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="left">unique_id</th>
<th align="left">cluster</th>
<th align="left">full_name</th>
<th align="left">first_and_surname</th>
<th align="left">first_name</th>
<th align="left">surname</th>
<th align="left">dob</th>
<th align="left">birth_place</th>
<th align="left">postcode</th>
<th align="left">gender</th>
<th align="left">occupation</th>
<th align="left">postal_code</th>
<th align="right">latitude</th>
<th align="right">longitude</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">0</td>
<td align="left">Q2296770-1</td>
<td align="left">Q2296770</td>
<td align="left">thomas clifford, 1st baron clifford of chudleigh</td>
<td align="left">thomas chudleigh</td>
<td align="left">thomas</td>
<td align="left">chudleigh</td>
<td align="left">1630-08-01</td>
<td align="left">devon</td>
<td align="left">TQ13 8DF</td>
<td align="left">male</td>
<td align="left">politician</td>
<td align="left">TQ13 8DF</td>
<td align="right">50.6927</td>
<td align="right">-3.8139</td>
</tr>
<tr>
<td align="right">1</td>
<td align="left">Q2296770-2</td>
<td align="left">Q2296770</td>
<td align="left">thomas of chudleigh</td>
<td align="left">thomas chudleigh</td>
<td align="left">thomas</td>
<td align="left">chudleigh</td>
<td align="left">1630-08-01</td>
<td align="left">devon</td>
<td align="left">TQ13 8DF</td>
<td align="left">male</td>
<td align="left">politician</td>
<td align="left">TQ13 8DF</td>
<td align="right">50.6927</td>
<td align="right">-3.8139</td>
</tr>
<tr>
<td align="right">2</td>
<td align="left">Q2296770-3</td>
<td align="left">Q2296770</td>
<td align="left">tom 1st baron clifford of chudleigh</td>
<td align="left">tom chudleigh</td>
<td align="left">tom</td>
<td align="left">chudleigh</td>
<td align="left">1630-08-01</td>
<td align="left">devon</td>
<td align="left">TQ13 8DF</td>
<td align="left">male</td>
<td align="left">politician</td>
<td align="left">TQ13 8DF</td>
<td align="right">50.6927</td>
<td align="right">-3.8139</td>
</tr>
<tr>
<td align="right">3</td>
<td align="left">Q2296770-4</td>
<td align="left">Q2296770</td>
<td align="left">thomas 1st chudleigh</td>
<td align="left">thomas chudleigh</td>
<td align="left">thomas</td>
<td align="left">chudleigh</td>
<td align="left">1630-08-01</td>
<td align="left">devon</td>
<td align="left">TQ13 8HU</td>
<td align="left"></td>
<td align="left">politician</td>
<td align="left">TQ13 8HU</td>
<td align="right">50.6876</td>
<td align="right">-3.8958</td>
</tr>
<tr>
<td align="right">4</td>
<td align="left">Q2296770-5</td>
<td align="left">Q2296770</td>
<td align="left">thomas clifford, 1st baron chudleigh</td>
<td align="left">thomas chudleigh</td>
<td align="left">thomas</td>
<td align="left">chudleigh</td>
<td align="left">1630-08-01</td>
<td align="left">devon</td>
<td align="left">TQ13 8DF</td>
<td align="left"></td>
<td align="left">politician</td>
<td align="left">TQ13 8DF</td>
<td align="right">50.6927</td>
<td align="right">-3.8139</td>
</tr>
</tbody>
</table>
</details>
<p>Now that coordinates have been added, a more detailed postcode comparison can be produced using the <code>postcode_comparison</code> template:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">DuckDB</label><label for="__tabbed_2_2">Spark</label><label for="__tabbed_2_3">Athena</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">splink.duckdb.duckdb_comparison_template_library</span> <span class="k">as</span> <span class="nn">ctl</span>

<span class="n">pc_comparison</span> <span class="o">=</span> <span class="n">ctl</span><span class="o">.</span><span class="n">postcode_comparison</span><span class="p">(</span>
    <span class="s2">&quot;postcode&quot;</span><span class="p">,</span>
    <span class="n">lat_col</span><span class="o">=</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span>
    <span class="n">long_col</span><span class="o">=</span><span class="s2">&quot;long&quot;</span><span class="p">,</span>
    <span class="n">km_thresholds</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pc_comparison</span><span class="o">.</span><span class="n">human_readable_description</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">splink.spark.spark_comparison_template_library</span> <span class="k">as</span> <span class="nn">ctl</span>

<span class="n">pc_comparison</span> <span class="o">=</span> <span class="n">ctl</span><span class="o">.</span><span class="n">postcode_comparison</span><span class="p">(</span>
    <span class="s2">&quot;postcode&quot;</span><span class="p">,</span>
    <span class="n">lat_col</span><span class="o">=</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span>
    <span class="n">long_col</span><span class="o">=</span><span class="s2">&quot;long&quot;</span><span class="p">,</span>
    <span class="n">km_thresholds</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pc_comparison</span><span class="o">.</span><span class="n">human_readable_description</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">splink.athena.athena_comparison_template_library</span> <span class="k">as</span> <span class="nn">ctl</span>

<span class="n">pc_comparison</span> <span class="o">=</span> <span class="n">ctl</span><span class="o">.</span><span class="n">postcode_comparison</span><span class="p">(</span>
    <span class="s2">&quot;postcode&quot;</span><span class="p">,</span>
    <span class="n">lat_col</span><span class="o">=</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span>
    <span class="n">long_col</span><span class="o">=</span><span class="s2">&quot;long&quot;</span><span class="p">,</span>
    <span class="n">km_thresholds</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pc_comparison</span><span class="o">.</span><span class="n">human_readable_description</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<details class="note">
<summary>Output</summary>
<blockquote>
<p>Comparison 'Exact match on full postcode vs. exact match on sector vs. exact match on district vs. exact match on area vs. Postcode within km_distance thresholds 1, 10, 50 vs. all other comparisons' of "postcode", "long" and "lat".</p>
<p>Similarity is assessed using the following ComparisonLevels:</p>
<pre><code>- 'Null' with SQL rule: 
    regexp_extract("postcode_l", '^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][A-Z]{2}$')
    IS NULL OR 
    regexp_extract("postcode_r", '^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][A-Z]{2}$')
    IS NULL OR
    regexp_extract("postcode_l", '^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][A-Z]{2}$')
    =='' OR 
    regexp_extract("postcode_r", '^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][A-Z]{2}$')
    ==''
- 'Exact match postcode' with SQL rule: "postcode_l" = "postcode_r"
- 'Exact match Postcode Sector' with SQL rule: 
    regexp_extract("postcode_l", '^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9]')
    = 
    regexp_extract("postcode_r", '^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9]')

- 'Exact match Postcode District' with SQL rule: 
    regexp_extract("postcode_l", '^[A-Z]{1,2}[0-9][A-Z0-9]?')
    = 
    regexp_extract("postcode_r", '^[A-Z]{1,2}[0-9][A-Z0-9]?')

- 'Exact match Postcode Area' with SQL rule: 
    regexp_extract("postcode_l", '^[A-Z]{1,2}')
    = 
    regexp_extract("postcode_r", '^[A-Z]{1,2}')

- 'Distance less than 1km' with SQL rule:

    cast(
        acos(

    case
        when (
    sin( radians("lat_l") ) * sin( radians("lat_r") ) +
    cos( radians("lat_l") ) * cos( radians("lat_r") )
        * cos( radians("long_r" - "long_l") )
) &gt; 1 then 1
        when (
    sin( radians("lat_l") ) * sin( radians("lat_r") ) +
    cos( radians("lat_l") ) * cos( radians("lat_r") )
        * cos( radians("long_r" - "long_l") )
) &lt; -1 then -1
        else (
    sin( radians("lat_l") ) * sin( radians("lat_r") ) +
    cos( radians("lat_l") ) * cos( radians("lat_r") )
        * cos( radians("long_r" - "long_l") )
)
    end

        ) * 6371
        as float
    )
&lt;= 1

- 'Distance less than 10km' with SQL rule:

    cast(
        acos(

    case
        when (
    sin( radians("lat_l") ) * sin( radians("lat_r") ) +
    cos( radians("lat_l") ) * cos( radians("lat_r") )
        * cos( radians("long_r" - "long_l") )
) &gt; 1 then 1
        when (
    sin( radians("lat_l") ) * sin( radians("lat_r") ) +
    cos( radians("lat_l") ) * cos( radians("lat_r") )
        * cos( radians("long_r" - "long_l") )
) &lt; -1 then -1
        else (
    sin( radians("lat_l") ) * sin( radians("lat_r") ) +
    cos( radians("lat_l") ) * cos( radians("lat_r") )
        * cos( radians("long_r" - "long_l") )
)
    end

        ) * 6371
        as float
    )
&lt;= 10

- 'Distance less than 50km' with SQL rule:

    cast(
        acos(

    case
        when (
    sin( radians("lat_l") ) * sin( radians("lat_r") ) +
    cos( radians("lat_l") ) * cos( radians("lat_r") )
        * cos( radians("long_r" - "long_l") )
) &gt; 1 then 1
        when (
    sin( radians("lat_l") ) * sin( radians("lat_r") ) +
    cos( radians("lat_l") ) * cos( radians("lat_r") )
        * cos( radians("long_r" - "long_l") )
) &lt; -1 then -1
        else (
    sin( radians("lat_l") ) * sin( radians("lat_r") ) +
    cos( radians("lat_l") ) * cos( radians("lat_r") )
        * cos( radians("long_r" - "long_l") )
)
    end

        ) * 6371
        as float
    )
&lt;= 50

- 'All other comparisons' with SQL rule: ELSE
</code></pre>
</blockquote>
</details>
<p>or by using <code>cll.distance_in_km_level()</code> in conjunction with other comparison levels: </p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:3"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">DuckDB</label><label for="__tabbed_3_2">Spark</label><label for="__tabbed_3_3">Athena</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">splink.duckdb.duckdb_comparison_level_library</span> <span class="k">as</span> <span class="nn">cll</span>

<span class="n">postcode_comparison</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;output_column_name&#39;</span><span class="p">:</span> <span class="s1">&#39;postcode&#39;</span><span class="p">,</span>
    <span class="s1">&#39;comparison_description&#39;</span><span class="p">:</span> <span class="s1">&#39;Postcode&#39;</span><span class="p">,</span>
    <span class="s1">&#39;comparison_levels&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">null_level</span><span class="p">(</span><span class="s2">&quot;postcode&quot;</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">exact_match_level</span><span class="p">(</span><span class="s2">&quot;postcode&quot;</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">distance_in_km_level</span><span class="p">(</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">distance_in_km_level</span><span class="p">(</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">distance_in_km_level</span><span class="p">(</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">else_level</span><span class="p">()</span>
    <span class="p">],</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">splink.spark.spark_comparison_level_library</span> <span class="k">as</span> <span class="nn">cll</span>

<span class="n">postcode_comparison</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;output_column_name&#39;</span><span class="p">:</span> <span class="s1">&#39;postcode&#39;</span><span class="p">,</span>
    <span class="s1">&#39;comparison_description&#39;</span><span class="p">:</span> <span class="s1">&#39;Postcode&#39;</span><span class="p">,</span>
    <span class="s1">&#39;comparison_levels&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">null_level</span><span class="p">(</span><span class="s2">&quot;postcode&quot;</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">exact_match_level</span><span class="p">(</span><span class="s2">&quot;postcode&quot;</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">distance_in_km_level</span><span class="p">(</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">distance_in_km_level</span><span class="p">(</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">distance_in_km_level</span><span class="p">(</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">else_level</span><span class="p">()</span>
    <span class="p">],</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">splink.athena.athena_comparison_level_library</span> <span class="k">as</span> <span class="nn">cll</span>

<span class="n">postcode_comparison</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;output_column_name&#39;</span><span class="p">:</span> <span class="s1">&#39;postcode&#39;</span><span class="p">,</span>
    <span class="s1">&#39;comparison_description&#39;</span><span class="p">:</span> <span class="s1">&#39;Postcode&#39;</span><span class="p">,</span>
    <span class="s1">&#39;comparison_levels&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">null_level</span><span class="p">(</span><span class="s2">&quot;postcode&quot;</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">exact_match_level</span><span class="p">(</span><span class="s2">&quot;postcode&quot;</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">distance_in_km_level</span><span class="p">(</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">distance_in_km_level</span><span class="p">(</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">distance_in_km_level</span><span class="p">(</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span>
        <span class="n">cll</span><span class="o">.</span><span class="n">else_level</span><span class="p">()</span>
    <span class="p">],</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
<hr>

<h2 id="phonetic-transformations">Phonetic transformations<a class="headerlink" href="#phonetic-transformations" title="Permanent link">&para;</a></h2>
<p>Phonetic transformation algorithms can be used to identify words that sound similar, even if they are spelled differently. These are particularly useful for names and can be used as an additional comparison level within name comparisons.</p>
<p>For a more detailed explanation on phonetic transformation algorithms, see the <a href="phonetic.html">topic guide</a>.</p>
<h3 id="example_1">Example<a class="headerlink" href="#example_1" title="Permanent link">&para;</a></h3>
<p>There are a number of python packages which support phonetic transformations that can be applied to a pandas dataframe, which can then be loaded into the DuckDBLinker. For example, creating a <a href="phonetic.html#double-metaphone">Double Metaphone</a> column with the <a href="https://pypi.org/project/phonetics/">phonetics</a> python library:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">phonetics</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;PATH/TO/DATA/fake_1000.parquet&quot;</span><span class="p">)</span>

<span class="c1"># Define a function to apply the dmetaphone phonetic algorithm to each name in the column</span>
<span class="k">def</span> <span class="nf">dmetaphone_name</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">phonetics</span><span class="o">.</span><span class="n">dmetaphone</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

<span class="c1"># Apply the function to the &quot;first_name&quot; and surname columns using the apply method</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;first_name_dm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">dmetaphone_name</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;surname_dm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;surname&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">dmetaphone_name</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<details class="note">
<summary>Output</summary>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">unique_id</th>
<th align="left">first_name</th>
<th align="left">surname</th>
<th align="left">dob</th>
<th align="left">city</th>
<th align="left">email</th>
<th align="right">group</th>
<th align="left">first_name_dm</th>
<th align="left">surname_dm</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">Julia</td>
<td align="left"></td>
<td align="left">2015-10-29</td>
<td align="left">London</td>
<td align="left">hannah88@powers.com</td>
<td align="right">0</td>
<td align="left">('JL', 'AL')</td>
<td align="left"></td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">Julia</td>
<td align="left">Taylor</td>
<td align="left">2015-07-31</td>
<td align="left">London</td>
<td align="left">hannah88@powers.com</td>
<td align="right">0</td>
<td align="left">('JL', 'AL')</td>
<td align="left">('TLR', '')</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right">2</td>
<td align="left">Julia</td>
<td align="left">Taylor</td>
<td align="left">2016-01-27</td>
<td align="left">London</td>
<td align="left">hannah88@powers.com</td>
<td align="right">0</td>
<td align="left">('JL', 'AL')</td>
<td align="left">('TLR', '')</td>
</tr>
<tr>
<td align="right">3</td>
<td align="right">3</td>
<td align="left">Julia</td>
<td align="left">Taylor</td>
<td align="left">2015-10-29</td>
<td align="left"></td>
<td align="left">hannah88opowersc@m</td>
<td align="right">0</td>
<td align="left">('JL', 'AL')</td>
<td align="left">('TLR', '')</td>
</tr>
<tr>
<td align="right">4</td>
<td align="right">4</td>
<td align="left">oNah</td>
<td align="left">Watson</td>
<td align="left">2008-03-23</td>
<td align="left">Bolton</td>
<td align="left">matthew78@ballard-mcdonald.net</td>
<td align="right">1</td>
<td align="left">('AN', '')</td>
<td align="left">('ATSN', 'FTSN')</td>
</tr>
</tbody>
</table>
</details>
<p>Note: <a href="phonetic.html#soundex">Soundex</a> and <a href="phonetic.html#metaphone">Metaphone</a> are also supported in <a href="https://pypi.org/project/phonetics/">phoneitcs</a> </p>
<p>Now that the dmetaphone columns have been added, they can be used within comparisons. For example, using the <a href="../comparison_template_library.html#splink.comparison_template_library.NameComparisonBase">name_comparison</a> function from the <a href="customising_comparisons.html#name-comparisons">comparison template library</a>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">DuckDB</label><label for="__tabbed_4_2">Spark</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">splink.duckdb.duckdb_comparison_template_library</span> <span class="k">as</span> <span class="nn">ctl</span>

<span class="n">first_name_comparison</span> <span class="o">=</span> <span class="n">ctl</span><span class="o">.</span><span class="n">name_comparison</span><span class="p">(</span>
                        <span class="s2">&quot;first_name&quot;</span><span class="p">,</span>
                        <span class="n">phonetic_col_name</span> <span class="o">=</span> <span class="s2">&quot;first_name_dm&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">first_name_comparison</span><span class="o">.</span><span class="n">human_readable_description</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">splink.spark.spark_comparison_template_library</span> <span class="k">as</span> <span class="nn">ctl</span>

<span class="n">first_name_comparison</span> <span class="o">=</span> <span class="n">ctl</span><span class="o">.</span><span class="n">name_comparison</span><span class="p">(</span>
                        <span class="s2">&quot;first_name&quot;</span><span class="p">,</span>
                        <span class="n">phonetic_col_name</span> <span class="o">=</span> <span class="s2">&quot;first_name_dm&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<details class="note">
<summary>Output</summary>
<blockquote>
<p>Comparison 'Exact match vs. Names with phonetic exact match vs. First_Name within jaro_winkler thresholds 0.95, 0.88 vs. anything else' of "first_name" and "first_name_dm".</p>
<p>Similarity is assessed using the following ComparisonLevels:</p>
<ul>
<li>'Null' with SQL rule: "first_name_l" IS NULL OR "first_name_r" IS NULL</li>
<li>'Exact match first_name' with SQL rule: "first_name_l" = "first_name_r"</li>
<li>'Exact match first_name_dm' with SQL rule: "first_name_dm_l" = "first_name_dm_r"</li>
<li>'Jaro_winkler_similarity &gt;= 0.95' with SQL rule: jaro_winkler_similarity("first_name_l", "first_name_r") &gt;= 0.95</li>
<li>'Jaro_winkler_similarity &gt;= 0.88' with SQL rule: jaro_winkler_similarity("first_name_l", "first_name_r") &gt;= 0.88</li>
<li>'All other comparisons' with SQL rule: ELSE</li>
</ul>
</blockquote>
</details>
<hr>

<h2 id="full-name">Full name<a class="headerlink" href="#full-name" title="Permanent link">&para;</a></h2>
<p>When comparing names, it can be helpful to <a href="comparison_templates.html#forename-and-surname-comparisons">construct a single comparison for for comparing the forename and surname</a> of two records. If a splink model has a single comparison for forename and surname, one of the major benefits is being able to consider the term frequency of the full name, as well as for forename and surname individually.</p>
<p>For example, in the UK, “Mohammed Khan” is a relatively common full name despite neither "Mohammed" or "Khan" occurring frequently as forename or surname, respectively. </p>
<p>For more on term frequency, see the dedicated <a href="term_frequency.md">topic guide</a>.</p>
<h3 id="example_2">Example<a class="headerlink" href="#example_2" title="Permanent link">&para;</a></h3>
<p>It is very simple to create a full name column from a <code>forename</code> and a <code>surname</code> in python.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;PATH/TO/DATA/fake_1000.parquet&quot;</span><span class="p">)</span>

<span class="c1"># Create a new column &quot;full_name&quot; by combining &quot;first_name&quot; and &quot;surname&quot; columns</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;full_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;first_name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;surname&#39;</span><span class="p">]</span>

<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<details class="note">
<summary>Output</summary>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">unique_id</th>
<th align="left">first_name</th>
<th align="left">surname</th>
<th align="left">dob</th>
<th align="left">city</th>
<th align="left">email</th>
<th align="right">group</th>
<th align="left">full_name</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">Julia</td>
<td align="left"></td>
<td align="left">2015-10-29</td>
<td align="left">London</td>
<td align="left">hannah88@powers.com</td>
<td align="right">0</td>
<td align="left">nan</td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">Julia</td>
<td align="left">Taylor</td>
<td align="left">2015-07-31</td>
<td align="left">London</td>
<td align="left">hannah88@powers.com</td>
<td align="right">0</td>
<td align="left">Julia  Taylor</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right">2</td>
<td align="left">Julia</td>
<td align="left">Taylor</td>
<td align="left">2016-01-27</td>
<td align="left">London</td>
<td align="left">hannah88@powers.com</td>
<td align="right">0</td>
<td align="left">Julia  Taylor</td>
</tr>
<tr>
<td align="right">3</td>
<td align="right">3</td>
<td align="left">Julia</td>
<td align="left">Taylor</td>
<td align="left">2015-10-29</td>
<td align="left"></td>
<td align="left">hannah88opowersc@m</td>
<td align="right">0</td>
<td align="left">Julia  Taylor</td>
</tr>
<tr>
<td align="right">4</td>
<td align="right">4</td>
<td align="left">oNah</td>
<td align="left">Watson</td>
<td align="left">2008-03-23</td>
<td align="left">Bolton</td>
<td align="left">matthew78@ballard-mcdonald.net</td>
<td align="right">1</td>
<td align="left">oNah Watson</td>
</tr>
</tbody>
</table>
</details>
<p>Now that the <code>full_name</code> column has been added, it can be used within comparisons. For example, using the <a href="../comparison_template_library.html#splink.comparison_template_library.ForenameSurnameComparisonBase">forenname_surname_comparison</a> function from the <a href="customising_comparisons.html#name-comparisons">comparison template library</a>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">DuckDB</label><label for="__tabbed_5_2">Spark</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">splink.duckdb.duckdb_comparison_template_library</span> <span class="k">as</span> <span class="nn">ctl</span>

<span class="n">full_name_comparison</span> <span class="o">=</span> <span class="n">ctl</span><span class="o">.</span><span class="n">forename_surname_comparison</span><span class="p">(</span>
    <span class="s2">&quot;first_name&quot;</span><span class="p">,</span>
    <span class="s2">&quot;surname&quot;</span><span class="p">,</span>
    <span class="n">term_frequency_adjustments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tf_adjustment_col_forename_and_surname</span><span class="o">=</span><span class="s2">&quot;full_name&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">full_name_comparison</span><span class="o">.</span><span class="n">human_readable_description</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">splink.spark.spark_comparison_template_library</span> <span class="k">as</span> <span class="nn">ctl</span>

<span class="n">full_name_comparison</span> <span class="o">=</span> <span class="n">ctl</span><span class="o">.</span><span class="n">forename_surname_comparison</span><span class="p">(</span>
    <span class="s2">&quot;first_name&quot;</span><span class="p">,</span>
    <span class="s2">&quot;surname&quot;</span><span class="p">,</span>
    <span class="n">term_frequency_adjustments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tf_adjustment_col_forename_and_surname</span><span class="o">=</span><span class="s2">&quot;full_name&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">full_name_comparison</span><span class="o">.</span><span class="n">human_readable_description</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<details class="note">
<summary>Output</summary>
<blockquote>
<p>Comparison 'Exact match vs. Forename and surname columns reversed vs. Surname exact match vs. Forename exact match vs. Surname within jaro-winkler threshold 0.88 vs. First_Name within jaro-winkler threshold 0.88 vs. anything else' of "surname" and "first_name".</p>
<p>Similarity is assessed using the following ComparisonLevels:</p>
<ul>
<li>'Null' with SQL rule: ("first_name_l" IS NULL OR "first_name_r" IS NULL) AND ("surname_l" IS NULL OR "surname_r" IS NULL)  </li>
<li>'Full name exact match' with SQL rule: "first_name_l" = "first_name_r" AND "surname_l" = "surname_r"</li>
<li>'Exact match on reversed cols' with SQL rule: "first_name_l" = "surname_r" and "first_name_r" = "surname_l"</li>
<li>'Exact match surname' with SQL rule: "surname_l" = "surname_r"</li>
<li>'Exact match first_name' with SQL rule: "first_name_l" = "first_name_r"</li>
<li>'Jaro_winkler_similarity surname &gt;= 0.88' with SQL rule: jaro_winkler_similarity("surname_l", "surname_r") &gt;= 0.88</li>
<li>'Jaro_winkler_similarity first_name &gt;= 0.88' with SQL rule: jaro_winkler_similarity("first_name_l", "first_name_r") &gt;= 0.88</li>
<li>'All other comparisons' with SQL rule: ELSE</li>
</ul>
</blockquote>
</details>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="querying_splink_results.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Retrieving and querying Splink results" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Retrieving and querying Splink results
              </div>
            </div>
          </a>
        
        
          
          <a href="customising_comparisons.html" class="md-footer__link md-footer__link--next" aria-label="Next: Defining and customising comparisons" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Defining and customising comparisons
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate", "content.code.copy", "content.tabs.link", "content.tooltips", "header.autohide", "search.highlight", "search.share", "search.suggest", "navigation.footer"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.b4d07000.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>